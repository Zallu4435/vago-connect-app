/* ===== Utility helpers ===== */
/* Animation delay utilities */
.delay-500 {
  animation-delay: 500ms;
}

.delay-700 {
  animation-delay: 700ms;
}

/* Safe area bottom padding */
.pb-safe {
  padding-bottom: env(safe-area-inset-bottom, 0px);
}

/* Firefox-specific fixes */
@-moz-document url-prefix() {
  .message-bubble {
    word-break: break-word;
  }
}

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom scrollbar (vertical and horizontal) */
.custom-scrollbar::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.custom-scrollbar::-webkit-scrollbar-track {
  background: var(--ancient-bg-medium);
  border-radius: 10px;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  background-color: var(--ancient-border-stone);
  border-radius: 10px;
  border: 2px solid var(--ancient-bg-medium);
}

/* Emoji Picker Ancient Theme Overrides */
.EmojiPickerReact,
.EmojiPickerReact.epr-dark-theme {
  --epr-bg-color: #292b30;
  --epr-text-color: #e0e0e0;
  --epr-category-label-bg-color: #1e2024;
  --epr-picker-border-color: #4b4f57;
  --epr-hover-bg-color: #33363d;
  --epr-search-bg-color: #33363d;
  --epr-search-border-color: #444850;
  --epr-search-placeholder-color: #a0a0a0;
  --epr-highlight-color: #4ade80;
  --epr-scrollbar-color: #4b4f57;

  background-color: var(--epr-bg-color) !important;
  border: 1px solid var(--epr-picker-border-color) !important;
  color: var(--epr-text-color) !important;
}

.EmojiPickerReact .epr-body {
  background-color: var(--epr-bg-color) !important;
}

.EmojiPickerReact .epr-emoji-category-label {
  background-color: var(--epr-category-label-bg-color) !important;
  color: var(--epr-text-color) !important;
  border-bottom: 1px solid var(--epr-picker-border-color) !important;
}

.EmojiPickerReact .epr-search-container input {
  background-color: var(--epr-search-bg-color) !important;
  color: var(--epr-text-color) !important;
  border: 1px solid var(--epr-search-border-color) !important;
}

.EmojiPickerReact .epr-emoji:hover,
.EmojiPickerReact .epr-emoji[aria-selected="true"] {
  background-color: var(--epr-hover-bg-color) !important;
}

.EmojiPickerReact .epr-preview {
  background-color: var(--epr-bg-color) !important;
  border-top: 1px solid var(--epr-picker-border-color) !important;
}

/* Theme variables for plain CSS usage */
:root {
  --ancient-bg-dark: #1e2024;
  --ancient-bg-medium: #292b30;
  --ancient-input-bg: #33363d;
  --ancient-input-border: #444850;
  --ancient-border-stone: #4b4f57;
  --ancient-text-light: #e0e0e0;
  --ancient-text-muted: #a0a0a0;
  --ancient-icon-glow: #4ade80;
  --ancient-bubble-user: #2A5C5A;
  --ancient-bubble-user-light: #386a6a;
  --ancient-bubble-incoming: #2e353f;
  --ancient-warning-text: #ef4444;
}

/* ── Modal body lock — page blur ── */
/* When a modal is open, blur and dim the underlying page content.
   Only targets direct body children that are NOT our modal portal. */
html[data-modal-open] body > *:not(#modal-portal) {
  filter: blur(4px) brightness(0.7);
  transition: filter 0.2s ease;
  pointer-events: none;
  /* Prevent interaction with page beneath modal */
  user-select: none;
}

/* Restore instantly when closed */
html:not([data-modal-open]) body > *:not(#modal-portal) {
  filter: none;
  pointer-events: auto;
  user-select: auto;
  transition: filter 0.15s ease;
}